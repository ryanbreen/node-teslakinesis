
<h1>Trips</h1>
 
  <div class='trip-header'>
    <div class='col-md-3'>Time</div>
    <div class='col-md-6'>Route</div>
    <div class='col-md-3'>Badges</div>
  </div>
 
<% @trips.each do |trip, index| %>
  <div>
    <div class='col-md-3'><%= trip.start_time.in_time_zone('America/New_York').to_formatted_s(:long_us) %> 
    <%= trip.end_time == nil ? 'ongoing' : 'for ' + distance_of_time_in_words(trip.start_time, trip.end_time, include_seconds: true) %>
    </div>
    <div class='col-md-6'>
      <%= link_to 'Trip from', vehicle_trip_path(params[:vehicle_id], trip) %>
      <% if trip.origin == nil %>
      an unknown origin (<%= link_to 'name it', new_vehicle_location_path(:vehicle_id => params[:vehicle_id], :lng => trip[:start_location].longitude, :lat => trip[:start_location].latitude, :z => trip[:start_location].z) %>)
      <% else %>
      <%= link_to trip.origin.name, vehicle_location_path(trip.vehicle_id, trip.origin) %>
      <% end %>
      <% if trip[:end_location] == nil %>
      is currently ongoing.
      <% elsif trip.destination == nil %>
      to an unknown destination (<%= link_to 'name it', new_vehicle_location_path(:vehicle_id => params[:vehicle_id], :lng => trip[:end_location].longitude, :lat => trip[:end_location].latitude, :z => trip[:end_location].z) %>).
      <% else %>
      to <%= link_to trip.destination.name, vehicle_location_path(trip.vehicle_id, trip.destination) %>.
      <% end %>
     <!-- <%= link_to 'Delete', vehicle_trip_path(trip.vehicle_id, trip), method: :delete, data: { confirm: 'Are you certain you want to delete this?' } %>< -->
    </div>
    <div class='col-md-3'>
      <% if trip.badges.length > 0 %>
        <% trip.badges.each do |badge| %>
          <img class='badge-small' src="<%= image_url(badge.custom_fields[:icon] + '.png') %>" alt="<%= badge.description %>" title="<%= badge.description %>" >
        <% end %>
      <% else %>
        &nbsp;
      <% end %>
    </div>
  </div>
<% end %>
<br>

<%= will_paginate @trips %>
 
<br>